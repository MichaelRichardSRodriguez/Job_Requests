@model Job_Requests.Models.ViewModels.JobRequestVM

@{
	ViewData["Title"] = "Delete Job Request";
	var statusStyle = string.Empty;
}

<div class="container py-5">
	<div class="row justify-content-center">
		<div class="col-md-9 col-lg-7">
			<!-- Card -->
			<div class="card shadow-lg rounded">
				<div class="card-header bg-danger text-white text-center py-3">
					<!-- Icon in the Header -->
					<h4 class="mb-0"><i class="bi bi-trash-fill"></i> @ViewData["Title"]</h4>
				</div>
				<div class="card-body p-3">
					<!-- Job Request Details -->
					<dl class="row mb-4">
						<dt class="col-md-4 col-sm-12 fw-bold">
							@Html.DisplayNameFor(model => model.JobRequests.RequestingDepartment)
						</dt>
						<dd class="col-md-8 col-sm-12">
							@Html.DisplayFor(model => model.JobRequests.RequestingDepartment.DepartmentName)
						</dd>
						<dt class="col-md-4 col-sm-12 fw-bold">
							@Html.DisplayNameFor(model => model.JobRequests.ReceivingDepartment)
						</dt>
						<dd class="col-md-8 col-sm-12">
							@Html.DisplayFor(model => model.JobRequests.ReceivingDepartment.DepartmentName)
						</dd>
						<dt class="col-md-4 col-sm-12 fw-bold">
							@Html.DisplayNameFor(model => model.JobRequests.JobType)
						</dt>
						<dd class="col-md-8 col-sm-12">
							@Html.DisplayFor(model => model.JobRequests.JobType.JobTypeName)
						</dd>
						<dt class="col-md-4 col-sm-12 fw-bold">
							@Html.DisplayNameFor(model => model.JobRequests.JobDescription)
						</dt>
						<dd class="col-md-8 col-sm-12">
							@Html.DisplayFor(model => model.JobRequests.JobDescription)
						</dd>
						<dt class="col-md-4 col-sm-12 fw-bold">
							@Html.DisplayNameFor(model => model.JobRequests.RequestDate)
						</dt>
						<dd class="col-md-8 col-sm-12">
							@Html.DisplayFor(model => model.JobRequests.RequestDate)
						</dd>
						@if (Model?.JobRequests.DateCompleted != null)
						{
							<dt class="col-md-4 col-sm-12 fw-bold">
								@Html.DisplayNameFor(model => model.JobRequests.DateCompleted)
							</dt>
							<dd class="col-md-8 col-sm-12">
								@Html.DisplayFor(model => model.JobRequests.DateCompleted)
							</dd>
						}
						<dt class="col-md-4 col-sm-12 fw-bold">
							@Html.DisplayNameFor(model => model.JobRequests.Status)
						</dt>
						<dd class="col-md-8 col-sm-12">

							@switch (Model?.JobRequests.Status)
							{
								case JobStatusEnum.Pending:
									statusStyle = "badge bg-secondary text-white";
									break;
								case JobStatusEnum.Assigned:
									statusStyle = "badge bg-info text-white";
									break;
								case JobStatusEnum.InProgress:
									statusStyle = "badge bg-primary text-white";
									break;
								case JobStatusEnum.Completed:
									statusStyle = "badge bg-success text-white";
									break;
								case JobStatusEnum.Cancelled:
									statusStyle = "badge bg-danger text-white";
									break;
							}
							<span class="@statusStyle">
								<strong>@Html.DisplayFor(model => model.JobRequests.Status)</strong>
							</span>
						</dd>
					</dl>

					<!-- Confirmation Section -->
					<h5 class="text-danger">Are you sure you want to delete this Job Request?</h5>

					<form asp-action="Delete">
						<input type="hidden" asp-for="JobRequests.RequestingDepartmentId" />
						<div class="d-flex justify-content-between mt-4">
							<!-- Delete Button with Icon -->
							<button type="submit" class="btn btn-danger w-45 shadow">
								<i class="bi bi-trash-fill"></i> Delete
							</button>
							<!-- Back Button with Icon -->
							<a asp-area="User" asp-controller ="JobRequest" asp-action="Index" class="btn btn-outline-dark w-45 shadow">
								<i class="bi bi-arrow-left-square-fill"></i> Back
							</a>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>